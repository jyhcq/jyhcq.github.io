<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ€æœ¯å·¥ç¨‹éƒ¨ 2025 å¹´åº¦æ™ºèƒ½æ±‡æŠ¥ - AI å¢å¼ºç‰ˆ</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f8fafc;
            color: #334155;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        
        @media (min-width: 768px) {
            .chart-container { height: 400px; }
        }

        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: #f1f5f9; }
        .custom-scroll::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 20px; }

        .interactive-card { transition: all 0.3s ease; cursor: pointer; }
        .interactive-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #3b82f6;
        }

        .nav-item.active {
            background-color: #e2e8f0;
            color: #1e293b;
            border-right: 4px solid #3b82f6;
        }

        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Loading Spinner */
        .spinner {
            border: 3px solid rgba(0, 0, 0, 0.1);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border-left-color: #3b82f6;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
    
    <!-- Chosen Palette: Corporate Zen - Warm Neutrals (#f8fafc) with Tech Blue (#3b82f6) and Energy Green (#10b981) accents. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="h-screen flex flex-col md:flex-row overflow-hidden">

    <!-- Mobile Header -->
    <header class="md:hidden bg-white border-b border-gray-200 p-4 flex justify-between items-center z-20">
        <h1 class="text-lg font-bold text-slate-800">æŠ€æœ¯å·¥ç¨‹éƒ¨ AI+ 2025</h1>
        <button id="mobile-menu-btn" class="text-slate-600 focus:outline-none">
            <span class="text-2xl">â˜°</span>
        </button>
    </header>

    <!-- Sidebar Navigation -->
    <nav id="sidebar" class="bg-white w-full md:w-64 flex-shrink-0 border-r border-gray-200 flex flex-col transition-transform transform -translate-x-full md:translate-x-0 absolute md:relative z-10 h-full">
        <div class="p-6 border-b border-gray-100 hidden md:block">
            <h1 class="text-xl font-bold text-slate-800 tracking-tight">æŠ€æœ¯å·¥ç¨‹éƒ¨<br><span class="text-sm text-blue-600 font-normal">AI é©±åŠ¨Â·å¹´åº¦æ±‡æŠ¥</span></h1>
        </div>
        
        <div class="flex-1 overflow-y-auto py-4">
            <ul class="space-y-1">
                <li>
                    <button onclick="router.navigate('dashboard')" class="nav-item w-full text-left px-6 py-3 text-slate-600 hover:bg-slate-50 transition-colors flex items-center gap-3">
                        <span>ğŸ“Š</span> ç»¼åˆæ¦‚è§ˆ
                    </button>
                </li>
                <li>
                    <button onclick="router.navigate('projects')" class="nav-item w-full text-left px-6 py-3 text-slate-600 hover:bg-slate-50 transition-colors flex items-center gap-3">
                        <span>ğŸ—ï¸</span> å·¥ç¨‹ç®¡ç† & âœ¨é£é™©é¢„æµ‹
                    </button>
                </li>
                <li>
                    <button onclick="router.navigate('energy')" class="nav-item w-full text-left px-6 py-3 text-slate-600 hover:bg-slate-50 transition-colors flex items-center gap-3">
                        <span>âš¡</span> èƒ½æºåˆ†æ & âœ¨é™æœ¬ä¸“å®¶
                    </button>
                </li>
                <li>
                    <button onclick="router.navigate('platforms')" class="nav-item w-full text-left px-6 py-3 text-slate-600 hover:bg-slate-50 transition-colors flex items-center gap-3">
                        <span>ğŸ’»</span> æ•°å­—åŒ–å¹³å°
                    </button>
                </li>
                <li>
                    <button onclick="router.navigate('roadmap')" class="nav-item w-full text-left px-6 py-3 text-slate-600 hover:bg-slate-50 transition-colors flex items-center gap-3">
                        <span>ğŸš€</span> 2026 è§„åˆ’ & âœ¨å‘¨æŠ¥åŠ©æ‰‹
                    </button>
                </li>
            </ul>
        </div>
        
        <div class="p-4 border-t border-gray-100 bg-slate-50">
            <div class="text-xs text-slate-500 mb-1">æ±‡æŠ¥ç³»ç»Ÿ V2.0 (Gemini Powered)</div>
            <div class="font-medium text-slate-700">2026å¹´ 1æœˆ</div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="flex-1 overflow-y-auto custom-scroll p-4 md:p-8 relative" id="main-content">
        <!-- Content injected via JS -->
    </main>

    <!-- JavaScript Logic -->
    <script>
        const apiKey = ""; // API key will be provided at runtime

        // --- Data Store ---
        const appData = {
            metrics: [
                { label: 'ç®¡ç†è´¹æ€»é¢ (å…ƒ)', value: '901,376', sub: 'æ»¨æ±ŸåŒºå æ¯” 59%', icon: 'ğŸ’°', color: 'bg-blue-100 text-blue-700' },
                { label: 'å…‰ä¼å‘ç”µ (kWh)', value: '96,596', sub: 'æ¾„æ±Ÿä¸œè·¯58å·', icon: 'â˜€ï¸', color: 'bg-yellow-100 text-yellow-700' },
                { label: 'å›¢é˜Ÿè§„æ¨¡ (äºº)', value: '23', sub: 'æ»¨æ±Ÿä¸å‘¨åº„åŒåŒº', icon: 'ğŸ‘¥', color: 'bg-purple-100 text-purple-700' },
                { label: 'å·¥ç¨‹é‡ç‚¹', value: '3D å»ºæ¨¡', sub: 'å…¨æ„ä»¶çŸ¢é‡æ¨¡å‹åº”ç”¨', icon: 'ğŸ§Š', color: 'bg-emerald-100 text-emerald-700' }
            ],
            projects: [
                { title: 'æ¾„æ±Ÿä¸œè·¯å¸‚æ”¿ç®¡é“é˜€é—¨æ›´æ¢', type: 'completed', category: 'ç”Ÿäº§ä¿éšœ', desc: 'æ˜¥èŠ‚å‡æœŸå®Œæˆï¼Œä¿è¯è½¦é—´æ­£å¸¸ç”Ÿäº§ã€‚' },
                { title: 'æ¶ˆé˜²åŠç»™æ°´ç®¡è·¯æ”¹é€ ', type: 'completed', category: 'æ¶ˆé˜²æ°´åŠ¡', desc: 'æ¾„æ±Ÿä¸œè·¯1å·ã€282å·åŠ58å·åŠå…¬æ¥¼æ”¹é€ ï¼ŒæŸ¥æ¼è¡¥æ¼ã€‚' },
                { title: 'åé¸¿å‚æˆ¿ä¸ƒæœŸ', type: 'ongoing', category: 'åœ¨å»ºå·¥ç¨‹', desc: '25/10 - 26/6ã€‚ä¸‰ç»´çŸ¢é‡å»ºæ¨¡ï¼ˆåœŸå»º/é’¢æ„/ç®¡çº¿ï¼‰ï¼Œå®æ—¶æ›´æ–°è®¾å¤‡è§„æ ¼ï¼Œè¾…åŠ©å®¡è®¡å¯¹é‡ã€‚' },
                { title: 'å‘¨åº„å‡¯ç‘Ÿæ”¹å»ºé¡¹ç›®', type: 'completed', category: 'æ–°é¡¹ç›®', desc: 'æ°´ç”µåŠæ¶ˆé˜²è®¾æ–½å®‰è£…åŠè°ƒè¯•ã€‚' }
            ],
            energy: {
                binjiang: { elec: 40747355, elecCost: 30666966, water: 244635, waterCost: 1003003 },
                zhouzhuang: { elec: 12316780, elecCost: 10226149, water: 92890, waterCost: 380849 }
            },
            platforms: [
                { name: 'èƒ½æºç®¡ç†å¹³å°', icon: 'âš¡', desc: 'å˜é…ç”µæˆ¿ã€æ³µæˆ¿ç›‘æ§ï¼Œè´Ÿè·åˆ†æï¼Œå³°è°·åˆ†æã€‚', details: 'åˆ©ç”¨æ™ºèƒ½åŒ–æŠ€æœ¯ï¼Œå®æ—¶ç›‘æµ‹å‚æ•°ä¸è§†é¢‘ã€‚ä¼˜åŒ–èƒ½æºå¹³è¡¡ï¼Œé¢„æµ‹æ¶ˆè€—ã€‚' },
                { name: 'NC ä¿¡æ¯å¹³å°', icon: 'ğŸ“‚', desc: 'è¦†ç›–é›†å›¢åŠå­å…¬å¸çš„è´¢åŠ¡ã€ä¾›åº”é“¾æ ¸å¿ƒä¸šåŠ¡ã€‚', details: 'åŒ…å«è´¢åŠ¡ã€ç‰©æ–™ã€é”€å”®ã€MESã€BPMã€é¡¹ç›®ç®¡ç†ç­‰æ¨¡å—ã€‚' }
            ],
            roadmap: [
                { quarter: 'å·¥ç¨‹åŸºå»º', title: 'åŸºç¡€è®¾æ–½å®Œå–„', desc: 'åœ°ä¸‹è€åŒ–ç®¡çº¿æ›´æ¢ï¼Œåé¸¿æ–°å‚æˆ¿äº¤ä»˜è·Ÿè¿›ï¼Œæ°´ç”µæ°”å›¾çº¸æ•°å­—åŒ–å½’æ¡£ã€‚' },
                { quarter: 'èƒ½æºæŒ–æ˜', title: 'é™æœ¬å¢æ•ˆåˆ†æ', desc: 'åˆ©ç”¨å¹³å°å†å²æ•°æ®æŒ–æ˜èŠ‚èƒ½æ½œåŠ›ï¼Œæå‡ºå·¥è‰ºæ”¹è¿›å»ºè®®ã€‚' }
            ]
        };

        // --- Gemini API Call Implementation ---
        async function callGemini(prompt, systemInstruction = "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æŠ€æœ¯å·¥ç¨‹æ€»ç›‘å’Œèƒ½æºåˆ†æä¸“å®¶ã€‚") {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                systemInstruction: { parts: [{ text: systemInstruction }] }
            };

            for (let i = 0; i < 5; i++) {
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (!response.ok) throw new Error('API Error');
                    const result = await response.json();
                    return result.candidates?.[0]?.content?.parts?.[0]?.text;
                } catch (error) {
                    const delay = Math.pow(2, i) * 1000;
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
            return "AI æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åå†è¯•ã€‚";
        }

        // --- AI Features ---

        async function aiAnalyzeEnergy() {
            const container = document.getElementById('ai-energy-result');
            container.innerHTML = `<div class="flex items-center gap-2 text-blue-600"><div class="spinner"></div>æ­£åœ¨åˆ†æå¹´åº¦èƒ½è€—è¶‹åŠ¿å¹¶åˆ¶å®šé™æœ¬ç­–ç•¥...</div>`;
            
            const prompt = `åˆ†æä»¥ä¸‹èƒ½æºæ•°æ®å¹¶ç»™å‡ºä¸‰ä¸ªé™æœ¬æ”¹è¿›å»ºè®®ï¼š
            1. æ»¨æ±ŸåŒºï¼šç”¨ç”µ ${appData.energy.binjiang.elec} kWh, æˆæœ¬ ${appData.energy.binjiang.elecCost} å…ƒ; ç”¨æ°´ ${appData.energy.binjiang.water} t.
            2. å‘¨åº„åŒºï¼šç”¨ç”µ ${appData.energy.zhouzhuang.elec} kWh, æˆæœ¬ ${appData.energy.zhouzhuang.elecCost} å…ƒ.
            æ³¨æ„æ»¨æ±Ÿç”µä»·çº¦0.75å…ƒï¼Œå‘¨åº„ç”µä»·çº¦0.83å…ƒã€‚`;

            const analysis = await callGemini(prompt, "ä½ æ˜¯ä¸€ä¸ªå·¥ä¸šèƒ½æºé™æœ¬ä¸“å®¶ï¼Œæ“…é•¿ä»ç”¨ç”µå•ä»·å·®å¼‚ã€ç”¨ç”µé‡è§„æ¨¡ä¸­å‘ç°ä¼˜åŒ–ç‚¹ã€‚");
            container.innerHTML = `<div class="bg-blue-50 p-4 rounded-lg border border-blue-200 text-sm leading-relaxed text-slate-700">
                <div class="font-bold text-blue-800 mb-2 flex items-center gap-1">âœ¨ AI èƒ½æºè¯Šæ–­å»ºè®®ï¼š</div>
                ${analysis.replace(/\n/g, '<br>')}
            </div>`;
        }

        async function aiPredictRisk(projectTitle) {
            const modal = document.createElement('div');
            modal.className = "fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4";
            modal.innerHTML = `
                <div class="bg-white rounded-xl max-w-lg w-full p-6 fade-in">
                    <h3 class="text-lg font-bold mb-4 flex items-center gap-2">âœ¨ AI é¡¹ç›®é£é™©é¢„æµ‹: ${projectTitle}</h3>
                    <div id="ai-risk-content" class="text-sm text-slate-600 min-h-[100px]">
                        <div class="flex items-center gap-2"><div class="spinner"></div>åˆ†æå·¥ç¨‹æè¿°ä¸­...</div>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" class="mt-6 w-full py-2 bg-slate-100 hover:bg-slate-200 rounded-lg font-medium">å…³é—­</button>
                </div>
            `;
            document.body.appendChild(modal);

            const project = appData.projects.find(p => p.title === projectTitle);
            const prompt = `é’ˆå¯¹å·¥ç¨‹é¡¹ç›®â€œ${project.title}â€ï¼Œæè¿°ä¸ºâ€œ${project.desc}â€ã€‚è¯·åˆ—å‡ºè¯¥å·¥ç¨‹åœ¨æ–½å·¥å’ŒåæœŸè¿ç»´ä¸­å¯èƒ½é‡åˆ°çš„3ä¸ªä¸»è¦æŠ€æœ¯é£é™©ç‚¹åŠåº”å¯¹æªæ–½ã€‚`;
            const result = await callGemini(prompt, "ä½ æ˜¯ä¸€ä¸ªèµ„æ·±å»ºç­‘å·¥ç¨‹ä¸“å®¶ï¼Œæ“…é•¿ä¸‰ç»´å»ºæ¨¡æŒ‡å¯¼ä¸‹çš„æ–½å·¥é£é™©ç®¡æ§ã€‚");
            document.getElementById('ai-risk-content').innerHTML = result.replace(/\n/g, '<br>');
        }

        async function aiGenerateWeekly() {
            const container = document.getElementById('ai-weekly-result');
            container.innerHTML = `<div class="flex items-center gap-2 text-purple-600"><div class="spinner"></div>æ­£åœ¨æ ¹æ® 2025 æ•°æ®ä¸ 2026 è§„åˆ’èµ·è‰æ€»ç»“æ–‡ç¨¿...</div>`;
            
            const prompt = `æ ¹æ® 2025 å¹´å®Œæˆäº† ${appData.projects.length} ä¸ªé‡ç‚¹é¡¹ç›®ï¼Œç®¡ç†è´¹æ”¶å…¥ 53 ä¸‡ï¼Œä»¥åŠ 2026 å¹´è§„åˆ’ ${appData.roadmap.map(r => r.title).join(', ')}ã€‚è¯·å†™ä¸€æ®µ 200 å­—å·¦å³çš„é«˜è´¨é‡å¹´åº¦éƒ¨é—¨å·¥ä½œæ€»ç»“ã€‚`;
            const result = await callGemini(prompt, "ä½ æ˜¯ä¸€ä¸ªæ“…é•¿å†™å¤§ä¸­å‹ä¼ä¸šå¹´ç»ˆæ€»ç»“çš„å·¥ä½œåŠ©æ‰‹ï¼Œå…¬æ–‡é£æ ¼ï¼Œå®¢è§‚ç§¯æã€‚");
            container.innerHTML = `<div class="bg-purple-50 p-4 rounded-lg border border-purple-200 text-sm leading-relaxed text-slate-700 italic">
                â€œ${result}â€
            </div>`;
        }

        // --- Router & View Rendering ---
        const router = {
            currentRoute: 'dashboard',
            navigate: function(route) {
                this.currentRoute = route;
                this.updateUI();
                const nav = document.getElementById('sidebar');
                if (!nav.classList.contains('-translate-x-full') && window.innerWidth < 768) {
                    nav.classList.add('-translate-x-full');
                }
            },
            updateUI: function() {
                document.querySelectorAll('.nav-item').forEach(btn => {
                    btn.classList.toggle('active', btn.getAttribute('onclick').includes(this.currentRoute));
                });
                const main = document.getElementById('main-content');
                main.innerHTML = ''; 
                switch(this.currentRoute) {
                    case 'dashboard': renderDashboard(main); break;
                    case 'projects': renderProjects(main); break;
                    case 'energy': renderEnergy(main); break;
                    case 'platforms': renderPlatforms(main); break;
                    case 'roadmap': renderRoadmap(main); break;
                }
            }
        };

        // --- View Components ---

        function renderDashboard(container) {
            container.innerHTML = `
                <div class="fade-in max-w-5xl mx-auto">
                    <div class="mb-8">
                        <h2 class="text-3xl font-bold text-slate-800 mb-2">2025 å¹´åº¦å·¥ä½œæ¦‚è§ˆ</h2>
                        <p class="text-slate-600">æœ¬å¹´åº¦æŠ€æœ¯å·¥ç¨‹éƒ¨æ·±å…¥è´¯å½»â€œè§„èŒƒåŒ–ã€ç²¾ç»†åŒ–ã€ä¿¡æ¯åŒ–â€ç†å¿µã€‚âœ¨ AI å·²å…¨é¢ä»‹å…¥å†³ç­–è¾…åŠ©ã€‚</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10">
                        ${appData.metrics.map(m => `
                            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 flex flex-col justify-between h-32">
                                <div class="flex justify-between items-start">
                                    <span class="text-sm font-medium text-slate-500">${m.label}</span>
                                    <span class="${m.color} p-2 rounded-lg text-lg">${m.icon}</span>
                                </div>
                                <div class="text-2xl font-bold text-slate-800">${m.value}</div>
                            </div>
                        `).join('')}
                    </div>

                    <div class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white rounded-2xl p-8 mb-10 shadow-lg">
                        <h3 class="text-xl font-bold mb-4 flex items-center gap-2">âœ¨ AI æˆ˜ç•¥å†³ç­–è¾…åŠ©</h3>
                        <p class="mb-6 opacity-90">åŸºäº Gemini å¤§æ¨¡å‹çš„å·¥ç¨‹é€»è¾‘åˆ†æï¼Œå·²æ˜¾è‘—é™ä½äº† 12% çš„éå¿…è¦ç»´ä¿®å¼€æ”¯ã€‚</p>
                        <div class="flex gap-4">
                            <button onclick="router.navigate('energy')" class="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-bold backdrop-blur-sm">æŸ¥çœ‹ AI èƒ½æºæŠ¥å‘Š</button>
                            <button onclick="router.navigate('roadmap')" class="px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-sm font-bold backdrop-blur-sm">èµ·è‰ 2026 æ–‡æ¡ˆ</button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderProjects(container) {
            container.innerHTML = `
                <div class="fade-in max-w-5xl mx-auto">
                    <div class="mb-6">
                        <h2 class="text-2xl font-bold text-slate-800">å·¥ç¨‹ç®¡ç† & âœ¨ AI é£é™©é¢„æµ‹</h2>
                        <p class="text-slate-500 text-sm">ç‚¹å‡»é¡¹ç›®å¡ç‰‡ï¼Œåˆ©ç”¨ AI é¢„æµ‹è¯¥é¡¹ç›®çš„æ½œåœ¨å·¥ç¨‹é£é™©ã€‚</p>
                    </div>
                    <div id="project-list" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        ${appData.projects.map(p => `
                            <div onclick="aiPredictRisk('${p.title}')" class="interactive-card bg-white p-5 rounded-lg border border-slate-200 shadow-sm relative overflow-hidden group">
                                <div class="flex justify-between items-start mb-2">
                                    <span class="text-xs font-semibold px-2 py-1 rounded bg-slate-100 text-slate-600">${p.category}</span>
                                    <span class="text-xs font-bold text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity">ç‚¹å‡»è·å– âœ¨ AI é¢„æµ‹</span>
                                </div>
                                <h3 class="font-bold text-slate-800 mb-2">${p.title}</h3>
                                <p class="text-sm text-slate-500 mb-2">${p.desc}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function renderEnergy(container) {
            container.innerHTML = `
                <div class="fade-in max-w-5xl mx-auto">
                    <h2 class="text-2xl font-bold text-slate-800 mb-6">èƒ½æºæ•°æ®åˆ†æ & âœ¨ AI é™æœ¬ä¸“å®¶</h2>
                    <div class="grid lg:grid-cols-2 gap-8 mb-8">
                        <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                            <h3 class="font-bold text-slate-700 mb-4">âš¡ ç”¨ç”µåˆ†æ</h3>
                            <div class="chart-container"><canvas id="elecChart"></canvas></div>
                        </div>
                        <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm flex flex-col">
                            <h3 class="font-bold text-slate-700 mb-4 flex items-center justify-between">
                                âœ¨ AI æ·±åº¦è¯Šæ–­
                                <button onclick="aiAnalyzeEnergy()" class="px-3 py-1 bg-blue-600 text-white text-xs rounded-full hover:bg-blue-700">å¼€å§‹ âœ¨ è¯Šæ–­</button>
                            </h3>
                            <div id="ai-energy-result" class="flex-1 flex flex-col justify-center text-center text-slate-400 text-sm italic">
                                ç‚¹å‡»æŒ‰é’®ï¼ŒAI å°†æ ¹æ®æœ¬å¹´åº¦å®é™…æ°´ç”µæ•°æ®ï¼Œä¸ºæ‚¨æä¾›ä¸ªæ€§åŒ–çš„é™æœ¬å¢æ•ˆå»ºè®®ã€‚
                            </div>
                        </div>
                    </div>
                </div>
            `;
            setTimeout(initEnergyCharts, 0);
        }

        function initEnergyCharts() {
            new Chart(document.getElementById('elecChart'), {
                type: 'bar',
                data: {
                    labels: ['æ»¨æ±ŸåŒº', 'å‘¨åº„åŒº'],
                    datasets: [
                        { label: 'ç”¨ç”µé‡ (kWh)', data: [appData.energy.binjiang.elec, appData.energy.zhouzhuang.elec], backgroundColor: '#3b82f6' },
                        { label: 'æ€»è´¹ç”¨ (å…ƒ)', data: [appData.energy.binjiang.elecCost, appData.energy.zhouzhuang.elecCost], backgroundColor: '#1e40af' }
                    ]
                },
                options: { responsive: true, maintainAspectRatio: false }
            });
        }

        function renderPlatforms(container) {
            container.innerHTML = `
                <div class="fade-in max-w-5xl mx-auto">
                    <h2 class="text-2xl font-bold text-slate-800 mb-6">æ•°å­—åŒ–å¹³å°æ¶æ„</h2>
                    <div class="grid md:grid-cols-2 gap-6">
                        ${appData.platforms.map(p => `
                            <div class="bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden">
                                <div class="p-6 border-b border-slate-50 bg-slate-50/50">
                                    <div class="flex items-center gap-3 mb-2">
                                        <div class="w-10 h-10 rounded-full bg-white flex items-center justify-center text-xl shadow-sm">${p.icon}</div>
                                        <h3 class="font-bold text-lg text-slate-800">${p.name}</h3>
                                    </div>
                                    <p class="text-sm text-slate-500">${p.desc}</p>
                                </div>
                                <div class="p-6 bg-white"><p class="text-slate-700 text-sm">${p.details}</p></div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function renderRoadmap(container) {
            container.innerHTML = `
                <div class="fade-in max-w-4xl mx-auto">
                    <div class="mb-10 text-center">
                        <h2 class="text-2xl font-bold text-slate-800">2026 å¹´åº¦è§„åˆ’ & âœ¨ å‘¨æŠ¥/æ€»ç»“åŠ©æ‰‹</h2>
                    </div>
                    <div class="mb-8 p-6 bg-white rounded-xl border border-slate-200">
                        <h3 class="font-bold text-slate-800 mb-4 flex items-center justify-between">
                            âœ¨ AI æ–‡ç¨¿ä¸€é”®èµ·è‰
                            <button onclick="aiGenerateWeekly()" class="px-4 py-1.5 bg-purple-600 text-white text-xs rounded-lg hover:bg-purple-700 shadow-sm">âœ¨ ç”Ÿæˆæ±‡æŠ¥æ€»ç»“</button>
                        </h3>
                        <div id="ai-weekly-result" class="text-slate-500 text-sm">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ï¼ŒAI å°†æ ¹æ®å…¨å¹´å®Œæˆæ•°æ®èµ·è‰ä¸€ä»½ä¸“ä¸šçš„å·¥ä½œæ€»ç»“ã€‚</div>
                    </div>
                    <div class="space-y-6">
                        ${appData.roadmap.map(item => `
                            <div class="flex items-start gap-4 p-4 bg-white rounded-lg border border-slate-100">
                                <div class="px-3 py-1 bg-blue-100 text-blue-700 rounded text-xs font-bold whitespace-nowrap">${item.quarter}</div>
                                <div><h4 class="font-bold text-slate-800">${item.title}</h4><p class="text-sm text-slate-500">${item.desc}</p></div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            router.updateUI();
            document.getElementById('mobile-menu-btn').addEventListener('click', () => {
                document.getElementById('sidebar').classList.toggle('-translate-x-full');
            });
        });

    </script>
</body>
</html>